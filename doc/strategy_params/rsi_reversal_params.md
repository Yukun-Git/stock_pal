# RSI Reversal 策略参数设计文档

**策略ID**: `rsi_reversal`
**策略名称**: RSI反转
**文档版本**: v1.0
**创建日期**: 2025-11-11

---

## 参数设计概述

本文档定义了RSI反转策略的所有可配置参数。RSI（相对强弱指标）是威尔德（Welles Wilder）于1978年发明的经典震荡指标，用于衡量价格变化的速度和幅度，识别超买超卖状态。

---

## 参数分类

### 1. 基础参数

#### 1.1 时间周期

| 参数名 | 类型 | 默认值 | 可选值 | 说明 |
|--------|------|--------|--------|------|
| `timeframe` | select | `D` | `D`(日线), `W`(周线) | 策略运行的时间周期 |

---

#### 1.2 RSI计算参数

| 参数名 | 类型 | 默认值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `period` | integer | 6 | 2-30 | RSI指标的计算周期 |

**设计说明**：
- **传统默认值**：14天（威尔德原始建议）
- **本策略默认值**：6天（更灵敏，适合A股短期波动）

**周期选择指导**：
- **短周期（5-7天）**：
  - 优点：灵敏度高，早期捕捉反转信号
  - 缺点：假信号多，容易被市场噪音干扰
  - 适合：短线交易、波段操作

- **中周期（10-14天）**：
  - 优点：平衡灵敏度和稳定性
  - 缺点：中庸，无明显特点
  - 适合：普通散户，中短期交易

- **长周期（20-30天）**：
  - 优点：信号稳定，假信号少
  - 缺点：滞后严重，入场时机较晚
  - 适合：长线投资者

---

### 2. 信号阈值参数

#### 2.1 超卖阈值

| 参数名 | 类型 | 默认值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `oversold` | integer | 30 | 10-40 | RSI低于此值视为超卖区域 |

**设计说明**：
- **标准值**：30（经典设置）
- **激进值**：20（更严格的超卖，信号更可靠但更少）
- **保守值**：40（放宽标准，增加交易机会但假信号多）

**阈值选择指导**：
- RSI < 20：深度超卖，反弹概率高，但出现频率低
- RSI < 30：经典超卖区，平衡信号质量和频率
- RSI < 40：偏保守，适合强势股或牛市

---

#### 2.2 超买阈值

| 参数名 | 类型 | 默认值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `overbought` | integer | 70 | 60-90 | RSI高于此值视为超买区域 |

**设计说明**：
- **标准值**：70（经典设置）
- **激进值**：80（更严格的超买，信号更可靠但更少）
- **保守值**：60（放宽标准，提前卖出降低风险）

**阈值选择指导**：
- RSI > 80：深度超买，回调概率高
- RSI > 70：经典超买区，平衡卖出时机
- RSI > 60：偏保守，适合震荡市或弱势股

---

#### 2.3 持有周期

| 参数名 | 类型 | 默认值 | 范围 | 说明 |
|--------|------|--------|------|------|
| `hold_periods` | integer | 5 | 1-30 | 买入后持有的周期数 |

**设计说明**：
- RSI策略通常在超卖反弹后快速平仓
- 默认5天适合短期反弹
- 可根据市场环境调整（牛市可延长至10-15天）

---

## 信号生成逻辑

### 买入信号（超卖反弹）
```
条件1：RSI上穿超卖线
逻辑：
  if RSI[t-1] < oversold and RSI[t] >= oversold:
      signal = BUY

注意：买入时机是RSI从超卖区反弹突破超卖线，而非跌入超卖区
```

### 卖出信号（超买回调）
```
条件1：RSI下穿超买线
逻辑：
  if RSI[t-1] > overbought and RSI[t] <= overbought:
      signal = SELL

条件2：持有周期到期
逻辑：
  if days_since_buy >= hold_periods:
      signal = SELL
```

---

## 参数优化建议

### 优化目标维度

1. **胜率优先**：
   - 使用更严格的阈值（oversold=20, overbought=80）
   - 增加确认条件（如RSI反弹幅度>5）

2. **交易频率优先**：
   - 使用较宽松的阈值（oversold=40, overbought=60）
   - 缩短RSI周期（period=5）

3. **收益率优先**：
   - 延长持有周期（hold_periods=10-15）
   - 结合趋势指标（如只在上升趋势中做超卖反弹）

---

## 参数预设方案

### 方案1：标准版（默认）
```json
{
  "period": 6,
  "oversold": 30,
  "overbought": 70,
  "hold_periods": 5,
  "timeframe": "D"
}
```
- 特点：经典设置，适合大多数情况
- 适合：普通散户，日内到短波段交易
- 预期：交易频率中等，胜率55-65%

### 方案2：激进版（高频交易）
```json
{
  "period": 5,
  "oversold": 40,
  "overbought": 60,
  "hold_periods": 3,
  "timeframe": "D"
}
```
- 特点：交易频繁，快进快出
- 适合：短线高手，能够频繁盯盘
- 预期：交易频率高，单次收益小，需要严格执行

### 方案3：稳健版（高胜率）
```json
{
  "period": 14,
  "oversold": 20,
  "overbought": 80,
  "hold_periods": 8,
  "timeframe": "D"
}
```
- 特点：信号少但质量高，深度超卖反弹
- 适合：稳健投资者，不追求频繁交易
- 预期：胜率高（70%+），但交易机会少

### 方案4：传统版（威尔德原始）
```json
{
  "period": 14,
  "oversold": 30,
  "overbought": 70,
  "hold_periods": 7,
  "timeframe": "D"
}
```
- 特点：RSI发明者的原始建议
- 适合：想要使用经典设置的投资者
- 预期：经过时间检验，稳定可靠

### 方案5：趋势跟踪版
```json
{
  "period": 6,
  "oversold": 30,
  "overbought": 70,
  "hold_periods": 15,
  "timeframe": "D"
}
```
- 特点：超卖买入后持有较长时间，捕捉趋势
- 适合：牛市或强势股
- 预期：单次收益高，但回撤也可能较大

---

## 常见问题与优化

### Q1: RSI钝化问题（超买/超卖持续）
**答**：在强趋势中，RSI可能长时间维持在极端区域

**优化方案**：
1. **趋势过滤**：
   - 仅在价格位于200日均线上方时交易超卖反弹
   - 避免在强下跌趋势中"接飞刀"

2. **背离识别**：
   - 价格创新低但RSI不创新低（底背离）→ 买入信号增强
   - 价格创新高但RSI不创新高（顶背离）→ 卖出信号增强

3. **多周期确认**：
   - 日线RSI超卖 + 周线RSI非超卖 → 更可靠

### Q2: 假突破问题
**答**：RSI刚触及超卖/超买线就反转

**优化方案**：
1. **延迟确认**：
   - 不在RSI刚穿过阈值时买入
   - 等待RSI反弹至少5点后确认（如从28反弹至33）

2. **幅度过滤**：
   - 要求RSI至少跌破超卖线2-5点（如跌至25-28）
   - 避免"假超卖"

3. **连续确认**：
   - 要求连续2天RSI在超卖区，第3天反弹时买入

### Q3: 震荡市中频繁交易
**答**：震荡市RSI会频繁穿越阈值

**优化方案**：
1. **增加交易间隔**：
   - 卖出后N天内（如5天）不再买入
   - 避免高频进出

2. **提高阈值严格性**：
   - 震荡市使用更严格的阈值（20/80而非30/70）

3. **结合趋势指标**：
   - 使用ADX判断是否为趋势市（ADX>25时才交易）

---

## 高级优化方向

### 1. RSI背离策略（推荐实现）

**底背离（Bullish Divergence）**：
```
条件：
  价格创新低（当前低点 < 前N天最低点）
  RSI未创新低（当前RSI > 前N天RSI最低值）
信号强度：非常强
```

**顶背离（Bearish Divergence）**：
```
条件：
  价格创新高（当前高点 > 前N天最高点）
  RSI未创新高（当前RSI < 前N天RSI最高值）
信号强度：非常强
```

### 2. RSI形态识别

**M头/W底**：
- RSI形成双顶（M头）→ 卖出信号
- RSI形成双底（W底）→ 买入信号

### 3. 多周期RSI共振

```
买入条件（强信号）：
  日线RSI < 30（超卖）
  AND 周线RSI > 40（非超卖，趋势健康）
  → 日线调整，周线趋势完好，反弹概率大
```

---

## 与其他策略的组合

### 组合1：RSI + 均线
```
买入条件：
  RSI < 30 AND 价格在MA20上方
  → 超卖反弹 + 上升趋势，安全边际高
```

### 组合2：RSI + MACD
```
买入条件：
  RSI < 30 AND MACD金叉
  → 双重超卖反弹确认
```

### 组合3：RSI + 布林带
```
买入条件：
  RSI < 30 AND 价格触及布林下轨
  → 极端超卖，反弹力度强
```

---

## 参数回测建议

### 参数搜索范围

```python
param_grid = {
    'period': [5, 6, 7, 10, 14, 21],
    'oversold': [20, 25, 30, 35, 40],
    'overbought': [60, 65, 70, 75, 80],
    'hold_periods': [3, 5, 7, 10, 15]
}

# 约束条件
filter: oversold < 50
filter: overbought > 50
filter: overbought - oversold >= 20
```

### 评估指标

1. **胜率**：超卖反弹策略应追求60%+胜率
2. **盈亏比**：目标1.5:1以上
3. **交易频率**：年化20-50次为宜
4. **最大回撤**：控制在15%以内

---

## 风险控制建议

### 1. 止损设置（重要！）
```json
{
  "stop_loss_pct": 0.05,  // 下跌5%止损（超卖反弹失败）
  "time_stop": 3          // 3天内不反弹则止损
}
```

**理由**：超卖反弹失败往往意味着进入更深的跌势

### 2. 仓位控制
```json
{
  "max_position_size": 0.3,  // 单次最多30%仓位
  "scale_by_rsi": true       // RSI越低，仓位可适当增加
}
```

**示例**：
- RSI=28 → 30%仓位
- RSI=22 → 40%仓位（深度超卖，加大仓位）

---

## 实现优先级

### Phase 1（已实现）✅
- ✅ 基础RSI计算
- ✅ 超买超卖阈值可配置
- ✅ RSI周期可配置

### Phase 2（建议实现）📋
- 📋 RSI背离检测（底背离/顶背离）
- 📋 延迟确认机制
- 📋 止损止盈设置

### Phase 3（高级功能）⭕
- ⭕ 多周期RSI共振
- ⭕ RSI形态识别（M头/W底）
- ⭕ 动态仓位管理

---

## 参数校验规则

```python
def validate_params(params):
    period = params['period']
    oversold = params['oversold']
    overbought = params['overbought']

    assert 2 <= period <= 30, "RSI周期必须在2-30之间"
    assert 10 <= oversold <= 40, "超卖阈值必须在10-40之间"
    assert 60 <= overbought <= 90, "超买阈值必须在60-90之间"
    assert overbought > oversold, "超买阈值必须大于超卖阈值"
    assert overbought - oversold >= 20, "超买超卖阈值差距至少20"

    return True
```

---

## 性能考虑

1. **计算复杂度**：O(n)，高效
2. **适合实时监控**：RSI计算简单，适合每日扫描全市场
3. **内存占用**：极小，仅需存储RSI序列

---

## 文档变更记录

| 版本 | 日期 | 变更内容 |
|------|------|---------|
| v1.0 | 2025-11-11 | 初始版本，定义RSI Reversal策略所有参数 |
