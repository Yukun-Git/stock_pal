# Backlog: å›æµ‹ç»“æœå­˜å‚¨ä¸å†å²æŸ¥è¯¢åŠŸèƒ½

**åˆ›å»ºæ—¥æœŸ**: 2025-11-12
**ä¼˜å…ˆçº§**: Medium (ä¸­)
**é¢„ä¼°å·¥ä½œé‡**: 3-5å¤©
**çŠ¶æ€**: Backlog
**æ ‡ç­¾**: `feature`, `database`, `persistence`, `history`

---

## 1. éœ€æ±‚æ¦‚è¿°

### 1.1 èƒŒæ™¯

å½“å‰ç³»ç»Ÿåªæ”¯æŒå³æ—¶å›æµ‹ï¼Œç»“æœä»…åœ¨å‰ç«¯å±•ç¤ºï¼Œä¸ä¿å­˜å†å²è®°å½•ã€‚ç”¨æˆ·æ— æ³•ï¼š
- æŸ¥çœ‹è¿‡å¾€çš„å›æµ‹ç»“æœ
- å¯¹æ¯”ä¸åŒæ—¶é—´/å‚æ•°çš„å›æµ‹æ€§èƒ½
- åˆ†äº«å›æµ‹ç»“æœç»™ä»–äºº
- è¿½è¸ªç­–ç•¥å‚æ•°çš„ä¼˜åŒ–å†ç¨‹

### 1.2 ç›®æ ‡

å®ç°å›æµ‹ç»“æœçš„æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶æä¾›åŸºäºå›æµ‹IDçš„æŸ¥è¯¢å’Œå±•ç¤ºåŠŸèƒ½ã€‚

---

## 2. ç”¨æˆ·æ•…äº‹

### US-1: è‡ªåŠ¨ä¿å­˜å›æµ‹ç»“æœ
**ä½œä¸º** é‡åŒ–äº¤æ˜“è€…
**æˆ‘å¸Œæœ›** æ¯æ¬¡å›æµ‹ç»“æœè‡ªåŠ¨ä¿å­˜åˆ°ç³»ç»Ÿ
**ä»¥ä¾¿** æˆ‘å¯ä»¥éšæ—¶æŸ¥çœ‹å†å²å›æµ‹è®°å½•

**éªŒæ”¶æ ‡å‡†**:
- [x] æ¯æ¬¡å›æµ‹å®Œæˆåï¼Œè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- [x] ä¿å­˜å†…å®¹åŒ…æ‹¬ï¼šé…ç½®å‚æ•°ã€æ€§èƒ½æŒ‡æ ‡ã€äº¤æ˜“æ˜ç»†ã€æƒç›Šæ›²çº¿
- [x] ç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ“ä½œï¼Œåå°è‡ªåŠ¨å®Œæˆ
- [x] ä¿å­˜å¤±è´¥ä¸å½±å“å›æµ‹ç»“æœå±•ç¤º

### US-2: æŸ¥çœ‹å›æµ‹å†å²åˆ—è¡¨
**ä½œä¸º** é‡åŒ–äº¤æ˜“è€…
**æˆ‘å¸Œæœ›** æŸ¥çœ‹æˆ‘çš„æ‰€æœ‰å†å²å›æµ‹è®°å½•
**ä»¥ä¾¿** æˆ‘å¯ä»¥äº†è§£è‡ªå·±åšè¿‡å“ªäº›å›æµ‹

**éªŒæ”¶æ ‡å‡†**:
- [x] æä¾›"å›æµ‹å†å²"é¡µé¢
- [x] åˆ—è¡¨å±•ç¤ºï¼šå›æµ‹IDã€è‚¡ç¥¨ã€ç­–ç•¥ã€æ—¥æœŸã€æ”¶ç›Šç‡ã€çŠ¶æ€
- [x] æ”¯æŒåˆ†é¡µï¼ˆæ¯é¡µ10-20æ¡ï¼‰
- [x] æ”¯æŒæ’åºï¼ˆæŒ‰æ—¶é—´ã€æ”¶ç›Šç‡ç­‰ï¼‰
- [x] æ”¯æŒç­›é€‰ï¼ˆæŒ‰è‚¡ç¥¨ã€ç­–ç•¥ã€æ—¥æœŸèŒƒå›´ï¼‰

### US-3: æŸ¥çœ‹å•ä¸ªå›æµ‹è¯¦æƒ…
**ä½œä¸º** é‡åŒ–äº¤æ˜“è€…
**æˆ‘å¸Œæœ›** ç‚¹å‡»æŸä¸ªå›æµ‹IDï¼ŒæŸ¥çœ‹å®Œæ•´çš„å›æµ‹è¯¦æƒ…
**ä»¥ä¾¿** æˆ‘å¯ä»¥æ·±å…¥åˆ†æå†å²å›æµ‹ç»“æœ

**éªŒæ”¶æ ‡å‡†**:
- [x] é€šè¿‡å›æµ‹IDè®¿é—®è¯¦æƒ…é¡µï¼ˆå¦‚ `/backtest/bt_xxx`ï¼‰
- [x] å±•ç¤ºæ‰€æœ‰æ€§èƒ½æŒ‡æ ‡ï¼ˆ16ä¸ªå¢å¼ºæŒ‡æ ‡ï¼‰
- [x] å±•ç¤ºäº¤æ˜“æ˜ç»†è¡¨æ ¼
- [x] å±•ç¤ºKçº¿å›¾å’Œä¹°å–ç‚¹
- [x] å±•ç¤ºæƒç›Šæ›²çº¿å›¾
- [x] å±•ç¤ºå›æµ‹é…ç½®å‚æ•°

### US-4: å¯¹æ¯”å¤šä¸ªå›æµ‹
**ä½œä¸º** é‡åŒ–äº¤æ˜“è€…
**æˆ‘å¸Œæœ›** å¯¹æ¯”2-3ä¸ªå›æµ‹çš„æ€§èƒ½å·®å¼‚
**ä»¥ä¾¿** æˆ‘å¯ä»¥è¯„ä¼°å‚æ•°è°ƒæ•´çš„æ•ˆæœ

**éªŒæ”¶æ ‡å‡†**:
- [x] æ”¯æŒé€‰æ‹©2-3ä¸ªå›æµ‹è¿›è¡Œå¯¹æ¯”
- [x] å¹¶æ’å±•ç¤ºå…³é”®æŒ‡æ ‡ï¼ˆæ”¶ç›Šç‡ã€Sharpeã€æœ€å¤§å›æ’¤ç­‰ï¼‰
- [x] é«˜äº®æ˜¾ç¤ºå·®å¼‚ï¼ˆæ›´å¥½/æ›´å·®ï¼‰
- [x] æƒç›Šæ›²çº¿å åŠ å±•ç¤º

### US-5: é‡æ–°è¿è¡Œå†å²å›æµ‹
**ä½œä¸º** é‡åŒ–äº¤æ˜“è€…
**æˆ‘å¸Œæœ›** åŸºäºå†å²å›æµ‹çš„å‚æ•°ï¼Œé‡æ–°è¿è¡Œä¸€æ¬¡å›æµ‹
**ä»¥ä¾¿** æˆ‘å¯ä»¥éªŒè¯ç­–ç•¥çš„ç¨³å®šæ€§

**éªŒæ”¶æ ‡å‡†**:
- [x] å†å²å›æµ‹è¯¦æƒ…é¡µæä¾›"é‡æ–°è¿è¡Œ"æŒ‰é’®
- [x] ç‚¹å‡»åï¼Œè‡ªåŠ¨å¡«å……åŸæœ‰å‚æ•°
- [x] ç”¨æˆ·å¯ä¿®æ”¹éƒ¨åˆ†å‚æ•°åæ‰§è¡Œ
- [x] æ–°å›æµ‹ä¸åŸå›æµ‹éƒ½ä¿å­˜åœ¨å†å²ä¸­

---

## 3. åŠŸèƒ½éœ€æ±‚

### 3.1 æ ¸å¿ƒåŠŸèƒ½

#### F-1: å›æµ‹ç»“æœå­˜å‚¨
- è‡ªåŠ¨ä¿å­˜æ¯æ¬¡å›æµ‹ç»“æœ
- å­˜å‚¨å†…å®¹ï¼š
  - å›æµ‹é…ç½®ï¼ˆè‚¡ç¥¨ã€ç­–ç•¥ã€å‚æ•°ã€æ—¥æœŸèŒƒå›´ã€åˆå§‹èµ„é‡‘ç­‰ï¼‰
  - æ€§èƒ½æŒ‡æ ‡ï¼ˆ16ä¸ªå¢å¼ºæŒ‡æ ‡ï¼‰
  - äº¤æ˜“æ˜ç»†ï¼ˆæ‰€æœ‰ä¹°å–è®°å½•ï¼‰
  - æƒç›Šæ›²çº¿ï¼ˆæ¯æ—¥æƒç›Šæ•°æ®ï¼‰
  - å…ƒæ•°æ®ï¼ˆå›æµ‹IDã€å¼•æ“ç‰ˆæœ¬ã€æ‰§è¡Œæ—¶é—´ã€ç”¨æˆ·ï¼‰

#### F-2: å›æµ‹å†å²æŸ¥è¯¢
- **åˆ—è¡¨æŸ¥è¯¢**: GET `/api/v1/backtest/history`
  - åˆ†é¡µã€æ’åºã€ç­›é€‰
  - è¿”å›æ‘˜è¦ä¿¡æ¯ï¼ˆä¸å«äº¤æ˜“æ˜ç»†å’Œæƒç›Šæ›²çº¿ï¼‰
- **è¯¦æƒ…æŸ¥è¯¢**: GET `/api/v1/backtest/{backtest_id}`
  - è¿”å›å®Œæ•´å›æµ‹ç»“æœ
  - åŒ…å«æ‰€æœ‰äº¤æ˜“æ˜ç»†å’Œæƒç›Šæ›²çº¿

#### F-3: å›æµ‹å¯¹æ¯”
- **å¯¹æ¯”æŸ¥è¯¢**: POST `/api/v1/backtest/compare`
  - æ¥æ”¶2-3ä¸ªå›æµ‹ID
  - è¿”å›å¯¹æ¯”æ•°æ®ç»“æ„

#### F-4: å›æµ‹ç®¡ç†
- **åˆ é™¤å›æµ‹**: DELETE `/api/v1/backtest/{backtest_id}`
- **å¯¼å‡ºå›æµ‹**: GET `/api/v1/backtest/{backtest_id}/export`ï¼ˆCSV/JSONï¼‰

### 3.2 å‰ç«¯é¡µé¢

#### P-1: å›æµ‹å†å²é¡µé¢ `/history`
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ å›æµ‹å†å²                         [ç­›é€‰] [æ’åº] [æœç´¢] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›æµ‹ID             è‚¡ç¥¨  ç­–ç•¥      æ—¥æœŸ        æ”¶ç›Šç‡   â”‚
â”‚  bt_20251112_xxx   600000 æ—©æ™¨ä¹‹æ˜Ÿ  2025-11-12   -0.79% â”‚
â”‚  bt_20251111_yyy   000001 MAäº¤å‰    2025-11-11   +2.34% â”‚
â”‚  bt_20251110_zzz   600519 MACDäº¤å‰  2025-11-10   +5.12% â”‚
â”‚  ...                                                     â”‚
â”‚  [æŸ¥çœ‹è¯¦æƒ…] [é‡æ–°è¿è¡Œ] [å¯¹æ¯”] [åˆ é™¤]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### P-2: å›æµ‹è¯¦æƒ…é¡µé¢ `/backtest/:id`
- å¤ç”¨ç°æœ‰çš„å›æµ‹ç»“æœå±•ç¤ºç»„ä»¶
- æ·»åŠ é¢åŒ…å±‘å¯¼èˆªï¼ˆé¦–é¡µ > å›æµ‹å†å² > è¯¦æƒ…ï¼‰
- æ·»åŠ æ“ä½œæŒ‰é’®ï¼ˆé‡æ–°è¿è¡Œã€å¯¼å‡ºã€åˆ é™¤ã€åˆ†äº«ï¼‰

#### P-3: å›æµ‹å¯¹æ¯”é¡µé¢ `/backtest/compare`
- å·¦å³å¹¶æ’å±•ç¤º2-3ä¸ªå›æµ‹
- æŒ‡æ ‡å¯¹æ¯”è¡¨æ ¼ï¼ˆé«˜äº®å·®å¼‚ï¼‰
- æƒç›Šæ›²çº¿å åŠ å›¾

---

## 4. æŠ€æœ¯æ–¹æ¡ˆ

### 4.1 æ•°æ®åº“è®¾è®¡

#### è¡¨1: backtest_runs (å›æµ‹è®°å½•è¡¨)

```sql
CREATE TABLE backtest_runs (
    id VARCHAR(50) PRIMARY KEY,                    -- å›æµ‹ID (bt_xxx)

    -- å›æµ‹é…ç½®
    symbol VARCHAR(20) NOT NULL,                   -- è‚¡ç¥¨ä»£ç 
    strategy_id VARCHAR(50) NOT NULL,              -- ç­–ç•¥ID
    strategy_params JSON,                          -- ç­–ç•¥å‚æ•°
    start_date DATE NOT NULL,                      -- å¼€å§‹æ—¥æœŸ
    end_date DATE NOT NULL,                        -- ç»“æŸæ—¥æœŸ
    initial_capital DECIMAL(15, 2) NOT NULL,       -- åˆå§‹èµ„é‡‘
    commission_rate DECIMAL(6, 4),                 -- æ‰‹ç»­è´¹ç‡
    min_commission DECIMAL(8, 2),                  -- æœ€ä½æ‰‹ç»­è´¹
    slippage_bps DECIMAL(6, 2),                    -- æ»‘ç‚¹
    stamp_tax_rate DECIMAL(6, 4),                  -- å°èŠ±ç¨

    -- æ€§èƒ½æŒ‡æ ‡
    total_return DECIMAL(10, 4),                   -- æ€»æ”¶ç›Šç‡
    cagr DECIMAL(10, 4),                           -- å¹´åŒ–æ”¶ç›Šç‡
    sharpe_ratio DECIMAL(10, 4),                   -- å¤æ™®æ¯”ç‡
    sortino_ratio DECIMAL(10, 4),                  -- ç´¢æè¯ºæ¯”ç‡
    calmar_ratio DECIMAL(10, 4),                   -- å¡ç›æ¯”ç‡
    max_drawdown DECIMAL(10, 4),                   -- æœ€å¤§å›æ’¤
    max_drawdown_duration INT,                     -- å›æ’¤æŒç»­æœŸ
    volatility DECIMAL(10, 4),                     -- æ³¢åŠ¨ç‡
    win_rate DECIMAL(10, 4),                       -- èƒœç‡
    profit_factor DECIMAL(10, 4),                  -- ç›ˆäºæ¯”
    total_trades INT,                              -- äº¤æ˜“æ¬¡æ•°
    avg_holding_period DECIMAL(10, 2),             -- å¹³å‡æŒä»“å¤©æ•°
    turnover_rate DECIMAL(10, 4),                  -- æ¢æ‰‹ç‡

    -- å…ƒæ•°æ®
    engine_version VARCHAR(20),                    -- å¼•æ“ç‰ˆæœ¬
    execution_time_seconds DECIMAL(10, 6),         -- æ‰§è¡Œæ—¶é—´
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,-- åˆ›å»ºæ—¶é—´
    user_id INT,                                   -- ç”¨æˆ·ID (æœªæ¥æ‰©å±•)

    -- ç´¢å¼•
    INDEX idx_symbol (symbol),
    INDEX idx_strategy (strategy_id),
    INDEX idx_created_at (created_at),
    INDEX idx_total_return (total_return)
);
```

#### è¡¨2: backtest_trades (äº¤æ˜“æ˜ç»†è¡¨)

```sql
CREATE TABLE backtest_trades (
    id INT AUTO_INCREMENT PRIMARY KEY,
    backtest_id VARCHAR(50) NOT NULL,              -- å…³è”å›æµ‹ID
    trade_date DATE NOT NULL,                      -- äº¤æ˜“æ—¥æœŸ
    action VARCHAR(10) NOT NULL,                   -- buy/sell
    price DECIMAL(10, 2) NOT NULL,                 -- ä»·æ ¼
    quantity INT NOT NULL,                         -- æ•°é‡
    amount DECIMAL(15, 2) NOT NULL,                -- é‡‘é¢
    commission DECIMAL(10, 2),                     -- æ‰‹ç»­è´¹

    FOREIGN KEY (backtest_id) REFERENCES backtest_runs(id) ON DELETE CASCADE,
    INDEX idx_backtest_id (backtest_id),
    INDEX idx_trade_date (trade_date)
);
```

#### è¡¨3: backtest_equity_curve (æƒç›Šæ›²çº¿è¡¨)

```sql
CREATE TABLE backtest_equity_curve (
    id INT AUTO_INCREMENT PRIMARY KEY,
    backtest_id VARCHAR(50) NOT NULL,              -- å…³è”å›æµ‹ID
    date DATE NOT NULL,                            -- æ—¥æœŸ
    equity DECIMAL(15, 2) NOT NULL,                -- æ€»æƒç›Š
    cash DECIMAL(15, 2) NOT NULL,                  -- ç°é‡‘
    position_value DECIMAL(15, 2) NOT NULL,        -- æŒä»“å¸‚å€¼

    FOREIGN KEY (backtest_id) REFERENCES backtest_runs(id) ON DELETE CASCADE,
    INDEX idx_backtest_id (backtest_id),
    INDEX idx_date (date)
);
```

### 4.2 åç«¯å®ç°

#### æ–°å¢æœåŠ¡: BacktestStorageService

```python
# backend/app/services/backtest_storage_service.py

class BacktestStorageService:
    """å›æµ‹ç»“æœå­˜å‚¨æœåŠ¡"""

    @staticmethod
    def save_backtest(result: BacktestResult, config: BacktestConfig):
        """ä¿å­˜å›æµ‹ç»“æœåˆ°æ•°æ®åº“"""
        # 1. ä¿å­˜å›æµ‹è®°å½•
        # 2. ä¿å­˜äº¤æ˜“æ˜ç»†
        # 3. ä¿å­˜æƒç›Šæ›²çº¿
        pass

    @staticmethod
    def get_backtest_list(page=1, per_page=20, filters=None):
        """æŸ¥è¯¢å›æµ‹å†å²åˆ—è¡¨"""
        pass

    @staticmethod
    def get_backtest_by_id(backtest_id: str):
        """æ ¹æ®IDæŸ¥è¯¢å›æµ‹è¯¦æƒ…"""
        pass

    @staticmethod
    def delete_backtest(backtest_id: str):
        """åˆ é™¤å›æµ‹è®°å½•"""
        pass

    @staticmethod
    def compare_backtests(backtest_ids: List[str]):
        """å¯¹æ¯”å¤šä¸ªå›æµ‹"""
        pass
```

#### æ–°å¢APIç«¯ç‚¹

```python
# backend/app/api/v1/backtest_history.py

@api.route('/backtest/history', methods=['GET'])
def get_backtest_history():
    """æŸ¥è¯¢å›æµ‹å†å²åˆ—è¡¨"""
    page = request.args.get('page', 1, type=int)
    per_page = request.args.get('per_page', 20, type=int)
    # ... å®ç°

@api.route('/backtest/<backtest_id>', methods=['GET'])
def get_backtest_detail(backtest_id):
    """æŸ¥è¯¢å›æµ‹è¯¦æƒ…"""
    # ... å®ç°

@api.route('/backtest/<backtest_id>', methods=['DELETE'])
def delete_backtest(backtest_id):
    """åˆ é™¤å›æµ‹"""
    # ... å®ç°

@api.route('/backtest/compare', methods=['POST'])
def compare_backtests():
    """å¯¹æ¯”å›æµ‹"""
    # ... å®ç°
```

#### ä¿®æ”¹ç°æœ‰ç«¯ç‚¹: è‡ªåŠ¨ä¿å­˜

```python
# backend/app/api/v1/backtest.py

@api.route('/backtest', methods=['POST'])
def run_backtest():
    # ... æ‰§è¡Œå›æµ‹
    result = orchestrator.run(...)

    # æ–°å¢ï¼šè‡ªåŠ¨ä¿å­˜å›æµ‹ç»“æœ
    try:
        BacktestStorageService.save_backtest(result, config)
    except Exception as e:
        # è®°å½•æ—¥å¿—ï¼Œä½†ä¸å½±å“è¿”å›ç»“æœ
        logger.error(f"Failed to save backtest: {e}")

    return jsonify(result)
```

### 4.3 å‰ç«¯å®ç°

#### æ–°å¢é¡µé¢ç»„ä»¶

```typescript
// frontend/src/pages/BacktestHistory.tsx
// å›æµ‹å†å²åˆ—è¡¨é¡µé¢

// frontend/src/pages/BacktestDetail.tsx
// å›æµ‹è¯¦æƒ…é¡µé¢ï¼ˆå¤ç”¨ç°æœ‰ç»„ä»¶ï¼‰

// frontend/src/pages/BacktestCompare.tsx
// å›æµ‹å¯¹æ¯”é¡µé¢
```

#### æ–°å¢APIæœåŠ¡

```typescript
// frontend/src/services/api.ts

export const backtestHistoryApi = {
  getHistory: (params) => axios.get('/api/v1/backtest/history', { params }),
  getDetail: (id) => axios.get(`/api/v1/backtest/${id}`),
  delete: (id) => axios.delete(`/api/v1/backtest/${id}`),
  compare: (ids) => axios.post('/api/v1/backtest/compare', { backtest_ids: ids }),
  export: (id) => axios.get(`/api/v1/backtest/${id}/export`),
};
```

#### è·¯ç”±é…ç½®

```typescript
// frontend/src/App.tsx

<Routes>
  <Route path="/" element={<HomePage />} />
  <Route path="/backtest" element={<BacktestPage />} />
  <Route path="/history" element={<BacktestHistory />} />  {/* æ–°å¢ */}
  <Route path="/backtest/:id" element={<BacktestDetail />} />  {/* æ–°å¢ */}
  <Route path="/compare" element={<BacktestCompare />} />  {/* æ–°å¢ */}
</Routes>
```

### 4.4 æ•°æ®åº“é€‰å‹

**æ¨è**: SQLite (å¼€å‘) â†’ PostgreSQL/MySQL (ç”Ÿäº§)

**ç†ç”±**:
- SQLite: è½»é‡ã€æ— éœ€é¢å¤–é…ç½®ã€é€‚åˆå¼€å‘æµ‹è¯•
- PostgreSQL: æˆç†Ÿã€æ€§èƒ½å¥½ã€JSONæ”¯æŒå®Œå–„
- MySQL: æ™®åŠåº¦é«˜ã€ç”Ÿæ€ä¸°å¯Œ

---

## 5. å®æ–½è®¡åˆ’

### é˜¶æ®µ1: æ•°æ®åº“è®¾è®¡ä¸åç«¯å­˜å‚¨ (1-2å¤©)
- [x] è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„
- [x] åˆ›å»º BacktestStorageService
- [x] å®ç° save_backtest() æ–¹æ³•
- [x] ä¿®æ”¹å›æµ‹APIï¼Œè‡ªåŠ¨ä¿å­˜ç»“æœ
- [x] å•å…ƒæµ‹è¯•

### é˜¶æ®µ2: æŸ¥è¯¢APIå¼€å‘ (1å¤©)
- [x] å®ç°å›æµ‹å†å²åˆ—è¡¨API
- [x] å®ç°å›æµ‹è¯¦æƒ…API
- [x] å®ç°åˆ é™¤API
- [x] APIæµ‹è¯•

### é˜¶æ®µ3: å‰ç«¯å†å²åˆ—è¡¨é¡µé¢ (1å¤©)
- [x] åˆ›å»º BacktestHistory é¡µé¢
- [x] åˆ—è¡¨å±•ç¤ºã€åˆ†é¡µã€ç­›é€‰ã€æ’åº
- [x] åˆ é™¤ã€å¯¼å‡ºåŠŸèƒ½

### é˜¶æ®µ4: å‰ç«¯è¯¦æƒ…é¡µé¢ (0.5å¤©)
- [x] åˆ›å»º BacktestDetail é¡µé¢
- [x] å¤ç”¨ç°æœ‰å›æµ‹ç»“æœç»„ä»¶
- [x] æ·»åŠ "é‡æ–°è¿è¡Œ"åŠŸèƒ½

### é˜¶æ®µ5: å›æµ‹å¯¹æ¯”åŠŸèƒ½ (1å¤©ï¼Œå¯é€‰)
- [x] å®ç°å¯¹æ¯”API
- [x] åˆ›å»º BacktestCompare é¡µé¢
- [x] å¹¶æ’å¯¹æ¯”ã€æƒç›Šæ›²çº¿å åŠ 

### é˜¶æ®µ6: æµ‹è¯•ä¸ä¼˜åŒ– (0.5å¤©)
- [x] é›†æˆæµ‹è¯•
- [x] æ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§æ•°æ®é‡ï¼‰
- [x] UI/UXä¼˜åŒ–

---

## 6. éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [x] æ¯æ¬¡å›æµ‹è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- [x] å¯æŸ¥çœ‹å›æµ‹å†å²åˆ—è¡¨
- [x] å¯æŸ¥çœ‹å•ä¸ªå›æµ‹è¯¦æƒ…ï¼ˆå®Œæ•´æ•°æ®ï¼‰
- [x] å¯åˆ é™¤å†å²å›æµ‹
- [x] å¯åŸºäºå†å²å›æµ‹é‡æ–°è¿è¡Œ
- [x] ï¼ˆå¯é€‰ï¼‰å¯å¯¹æ¯”2-3ä¸ªå›æµ‹

### æ€§èƒ½éªŒæ”¶
- [x] ä¿å­˜å›æµ‹ < 100ms
- [x] æŸ¥è¯¢åˆ—è¡¨ï¼ˆ20æ¡ï¼‰< 200ms
- [x] æŸ¥è¯¢è¯¦æƒ… < 300ms
- [x] æ”¯æŒè‡³å°‘1000æ¡å†å²è®°å½•

### æ•°æ®å®Œæ•´æ€§
- [x] æ‰€æœ‰16ä¸ªæ€§èƒ½æŒ‡æ ‡æ­£ç¡®ä¿å­˜
- [x] æ‰€æœ‰äº¤æ˜“æ˜ç»†æ­£ç¡®ä¿å­˜
- [x] æƒç›Šæ›²çº¿æ•°æ®å®Œæ•´
- [x] åˆ é™¤å›æµ‹æ—¶ï¼Œå…³è”æ•°æ®çº§è”åˆ é™¤

---

## 7. é£é™©ä¸ä¾èµ–

### é£é™©
1. **æ•°æ®åº“æ€§èƒ½**: å¤§é‡å†å²è®°å½•å¯èƒ½å¯¼è‡´æŸ¥è¯¢å˜æ…¢
   - **ç¼“è§£**: æ·»åŠ ç´¢å¼•ã€åˆ†é¡µã€å®šæœŸå½’æ¡£
2. **å­˜å‚¨ç©ºé—´**: æƒç›Šæ›²çº¿æ•°æ®é‡è¾ƒå¤§ï¼ˆ2å¹´æ—¥é¢‘â‰ˆ500è¡Œï¼‰
   - **ç¼“è§£**: å‹ç¼©å­˜å‚¨ã€å®šæœŸæ¸…ç†æ—§æ•°æ®
3. **å¹¶å‘å†™å…¥**: å¤šç”¨æˆ·åŒæ—¶å›æµ‹æ—¶çš„æ•°æ®åº“é”
   - **ç¼“è§£**: ä½¿ç”¨å¼‚æ­¥ä¿å­˜ã€é˜Ÿåˆ—æœºåˆ¶

### ä¾èµ–
1. **æ•°æ®åº“**: éœ€è¦æ·»åŠ æ•°æ®åº“ä¾èµ–ï¼ˆSQLAlchemy + PostgreSQL/MySQLï¼‰
2. **ORM**: éœ€è¦å®šä¹‰æ•°æ®æ¨¡å‹
3. **è¿ç§»å·¥å…·**: éœ€è¦æ•°æ®åº“è¿ç§»å·¥å…·ï¼ˆAlembicï¼‰

---

## 8. æœªæ¥æ‰©å±•

### çŸ­æœŸ (1-2æœˆ)
- å›æµ‹ç»“æœåˆ†äº«ï¼ˆç”Ÿæˆåˆ†äº«é“¾æ¥ï¼‰
- å¯¼å‡ºä¸ºPDFæŠ¥å‘Š
- å›æµ‹æ ‡ç­¾å’Œå¤‡æ³¨

### ä¸­æœŸ (3-6æœˆ)
- å¤šç”¨æˆ·æ”¯æŒï¼ˆæ¯ä¸ªç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±çš„å›æµ‹ï¼‰
- å›æµ‹æ”¶è—å¤¹
- å›æµ‹æœç´¢ï¼ˆå…¨æ–‡æœç´¢ï¼‰

### é•¿æœŸ (6-12æœˆ)
- å›æµ‹æ•°æ®åˆ†æï¼ˆç»Ÿè®¡æœ€ä½³ç­–ç•¥ã€æœ€ä½³å‚æ•°ï¼‰
- ç­–ç•¥æ¼”åŒ–å›¾è°±ï¼ˆå‚æ•°ä¼˜åŒ–è½¨è¿¹ï¼‰
- AIæ¨èï¼ˆåŸºäºå†å²å›æµ‹æ¨èå‚æ•°ï¼‰

---

## 9. å‚è€ƒèµ„æ–™

- å›æµ‹å¼•æ“2.0è®¾è®¡æ–‡æ¡£: `doc/design/backtest_engine_upgrade_design.md`
- å‰ç«¯å¢å¼ºæŒ‡æ ‡è®¾è®¡: `doc/design/frontend_metrics_enhancement_design.md`
- APIä½¿ç”¨æŒ‡å—: `doc/api/backtest_engine_v2_usage.md`

---

**å¤‡æ³¨**:
- æ­¤åŠŸèƒ½ä¸ºå¢å¼ºåŠŸèƒ½ï¼Œä¸å½±å“ç°æœ‰å›æµ‹æµç¨‹
- å»ºè®®åœ¨ç”¨æˆ·åé¦ˆè‰¯å¥½åå†å®æ–½
- å¯ä»¥åˆ†é˜¶æ®µå®æ–½ï¼Œä¼˜å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼ˆå­˜å‚¨+æŸ¥è¯¢ï¼‰

**é¢„æœŸæ”¶ç›Š**:
- ç”¨æˆ·ç•™å­˜ç‡æå‡ 30%+
- ç”¨æˆ·æ´»è·ƒåº¦æå‡ 50%+
- ç­–ç•¥ä¼˜åŒ–æ•ˆç‡æå‡ 2x

---

**çŠ¶æ€å˜æ›´è®°å½•**:
- 2025-11-12: åˆ›å»º backlogï¼ŒçŠ¶æ€ä¸º `Backlog`
